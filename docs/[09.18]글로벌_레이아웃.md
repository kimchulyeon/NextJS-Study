# 09.18

## <div style="background-color: yellow;">ê¸€ë¡œë²Œ ë ˆì´ì•„ì›ƒ</div>

> \_app.tsx ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ì— ê¸€ë¡œë²Œ ë ˆì´ì•„ì›ƒì„ ì ìš”

### ê¸°ë³¸ ì˜ˆì œ

```tsx
// _app.tsx
import type { AppProps } from "next/app";

export default function App({ Component, pageProps }: AppProps) {
  return (
    <>
      <header>Header</header>
      <main>
        <Component {...pageProps} />
      </main>
      <fotter>Footer</fotter>
    </>
  );
}
```

### ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬

```tsx
// global-layout.tsx
import { ReactNode } from 'react'

export default function GlobalLayout({ children }: { children: ReactNode } ) {
  return (
    <header>Header</header>
    <main>
      {children}
    </main>
    <footer>Footer</footer>
  )
}
```

```tsx
// _app.tsx
import type { AppProps } from "next/app";

export default function App({ Component, pageProps }: AppProps) {
  return (
    <>
      <GlobalLayout>
        <Component {...pageProps} />
      </GlobalLayout>
    </>
  );
}
```

## <br/><br/>

<br/>

## <div style="background-color: yellow;">í˜ì´ì§€ë³„ ë ˆì´ì•„ì›ƒ</div>

> search ê´€ë ¨ í˜ì´ì§€ì—ë§Œ ì ìš©ë˜ì–´ì•¼í•˜ëŠ” ë ˆì´ì•„ì›ƒ

```tsx
// search-layout.tsx

import { useRouter } from "next/router";
import { ReactNode, useEffect, useState } from "react";
import style from "./searchable-layout.module.css";

export default function SearchableLayout({
  children,
}: {
  children: ReactNode;
}) {
  const router = useRouter();
  const [search, setSearch] = useState("");

  const q = router.query.q as string;

  useEffect(() => {
    setSearch(q || "");
  }, [q]);

  const onChangeSearch = (e: React.ChangeEvent<HTMLInputElement>) => {
    setSearch(e.target.value);
  };

  const onSubmit = () => {
    if (!search || q === search) return;
    // ğŸ“Œ ê²€ìƒ‰ì–´ë¥¼ ë°”ë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì— ì—…ë°ì´íŠ¸í•´ì„œ /search í˜ì´ì§€ë¡œ ì´ë™
    router.push(`/search?q=${search}`);
  };

  const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === "Enter") {
      onSubmit();
    }
  };

  return (
    <div>
      <div className={style.searchbar_container}>
        <input
          value={search}
          onKeyDown={onKeyDown}
          onChange={onChangeSearch}
          placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” ..."
        />
        <button onClick={onSubmit}>ê²€ìƒ‰</button>
      </div>
      {children}
    </div>
  );
}
```

> /src/index.tsx íŒŒì¼ì— ë ˆì´ì•„ì›ƒ ì¡°ê±´ ì„¤ì •

```tsx
// index.tsx

export default function Home() {
  return <></>;
}

// âœ…âœ…âœ… index.tsxì—ì„œ ë ˆì´ì•„ì›ƒ ì„¤ì • ( getLayoutì€ ì„ì˜ë¡œ ì¶”ê°€í•œ ë©”ì†Œë“œ )
Home.getLayout = (page: ReactNode) => {
  return <SearchLayout>{page}</SearchLayout>;
};
```

> \_app.tsx ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ë ˆì´ì•„ì›ƒ ì„¤ì • ì ìš©í•´ì£¼ê¸°

```tsx
// _app.tsx

export default function App({ Component, pageProps }: AppProps) {
  const getLayout = Component.getLayout ?? (page: ReactNode) => page; // ğŸ“Œ getLayout ì„¤ì •ì„ ì•ˆí•œ ì»´í¬ë„ŒíŠ¸ëŠ” ê·¸ëŒ€ë¡œ

  return <GlobalLayout>{getLayout(<Component {...pageProps} />)}</GlobalLayout>;
}
```

> ğŸ“Œ getLayoutì€ ì„ì˜ë¡œ ì¶”ê°€ ë©”ì†Œë“œì´ê¸° ë•Œë¬¸ì— íƒ€ì… ì„ ì–¸ì„ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤. (ë‹¤ë¥¸ ë©”ì†Œë“œëª…ìœ¼ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤ëŠ” ë§)

```tsx
// _app.tsx

// âœ… Component íƒ€ì… (NextPage) í™•ì¥ íƒ€ì… ì„ ì–¸
type NextPageWithLayoutType = NextPage & { getLayout?: (page: ReactNode) => ReactNode }

export default function App({ Component, pageProps }: AppProps & { Component: NextPageWithLayoutType }) { // âœ… Component íƒ€ì… í™•ì¥
  const getLayout = Component.getLayout ?? (page: ReactNode) => page; // ğŸ“Œ getLayout ì„¤ì •ì„ ì•ˆí•œ ì»´í¬ë„ŒíŠ¸ëŠ” ê·¸ëŒ€ë¡œ

  return <GlobalLayout>{getLayout(<Component {...pageProps} />)}</GlobalLayout>;
}
```
