# 09.22

## <div style="background-color: yellow;">íŠ¹ì • ì‹œê°„ë§ˆë‹¤ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ISR (1)</div>

> SSG ë°©ì‹ìœ¼ë¡œ ìƒì„±ëœ ì •ì  í˜ì´ì§€ë¥¼ ì¼ì • ì‹œê°„ì„ ì£¼ê¸°ë¡œ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ê¸°ìˆ  : revalidate

```tsx
export const getStaticProps = async () => {
  const [allBooks, recommendBooks] = await Promise.all([
    fetchAllBooks(),
    fetchRecommendBooks(),
  ]);

  return {
    props: {
      allBooks,
      recommendBooks,
    },

    // ğŸ“Œ 3ì´ˆ ë§ˆë‹¤ ë‹¤ì‹œ ìƒì„±
    revalidate: 3,
  };
};

export default function Page({
  allBooks,
  recommendBooks,
}: InferGetStaticPropsType<typeof getStaticProps>) {
  return (
    <>
      <div></div>
    </>
  );
}
```

## <div style="background-color: yellow;">ìš”ì²­ì„ ë°›ì„ ë•Œë§ˆë‹¤ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ISR (2)</div>

> On Demand ISR

### /src/pages/api/revalidate.ts

```ts
import { NextApiRequest, NextApiResponse } from "next";

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  // pages/index.tsx ê²½ë¡œ('/')ë¥¼ revalidate ì„¤ì •
  try {
    await res.revalidate("/");
    return res.json({ revalidate: true });
  } catch (err) {
    res.status(500).send("Revalidation Failed");
  }
}
```
